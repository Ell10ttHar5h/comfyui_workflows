{"id":"91f6bbe2-ed41-4fd6-bac7-71d5b5864ecb","revision":0,"last_node_id":72,"last_link_id":129,"nodes":[{"id":38,"type":"CLIPLoader","pos":[-30,190],"size":[350,110],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[74,75]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPLoader","models":[{"name":"umt5_xxl_fp8_e4m3fn_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors","directory":"text_encoders"}]},"widgets_values":["umt5_xxl_fp8_e4m3fn_scaled.safetensors","wan","default"]},{"id":48,"type":"ModelSamplingSD3","pos":[850,20],"size":[210,58],"flags":{"collapsed":false},"order":8,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":94},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[95]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"ModelSamplingSD3"},"widgets_values":[8]},{"id":39,"type":"VAELoader","pos":[-30,350],"size":[350,60],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[76,109]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAELoader","models":[{"name":"wan2.2_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/resolve/main/split_files/vae/wan2.2_vae.safetensors","directory":"vae"}]},"widgets_values":["wan2.2_vae.safetensors"]},{"id":7,"type":"CLIPTextEncode","pos":[380,260],"size":[425.27801513671875,180.6060791015625],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":75},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[112]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode"},"widgets_values":["è‰²è°ƒè‰³ä¸½ï¼Œè¿‡æ›ï¼Œé™æ€ï¼Œç»†èŠ‚æ¨¡ç³Šä¸æ¸…ï¼Œå­—å¹•ï¼Œé£æ ¼ï¼Œä½œå“ï¼Œç”»ä½œï¼Œç”»é¢ï¼Œé™æ­¢ï¼Œæ•´ä½“å‘ç°ï¼Œæœ€å·®è´¨é‡ï¼Œä½è´¨é‡ï¼ŒJPEGå‹ç¼©æ®‹ç•™ï¼Œä¸‘é™‹çš„ï¼Œæ®‹ç¼ºçš„ï¼Œå¤šä½™çš„æ‰‹æŒ‡ï¼Œç”»å¾—ä¸å¥½çš„æ‰‹éƒ¨ï¼Œç”»å¾—ä¸å¥½çš„è„¸éƒ¨ï¼Œç•¸å½¢çš„ï¼Œæ¯å®¹çš„ï¼Œå½¢æ€ç•¸å½¢çš„è‚¢ä½“ï¼Œæ‰‹æŒ‡èåˆï¼Œé™æ­¢ä¸åŠ¨çš„ç”»é¢ï¼Œæ‚ä¹±çš„èƒŒæ™¯ï¼Œä¸‰æ¡è…¿ï¼ŒèƒŒæ™¯äººå¾ˆå¤šï¼Œå€’ç€èµ°"],"color":"#322","bgcolor":"#533"},{"id":6,"type":"CLIPTextEncode","pos":[380,50],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":74},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[111]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode"},"widgets_values":["japanese women marathon running competition in coloerful light runner in studio lightning on white background"],"color":"#232","bgcolor":"#353"},{"id":68,"type":"Canny","pos":[720,540],"size":[360,82],"flags":{},"order":10,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":122},{"localized_name":"low_threshold","name":"low_threshold","type":"FLOAT","widget":{"name":"low_threshold"},"link":null},{"localized_name":"high_threshold","name":"high_threshold","type":"FLOAT","widget":{"name":"high_threshold"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[123,127]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"Canny","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":[0.1,0.6]},{"id":67,"type":"GetVideoComponents","pos":[400,560],"size":[185.17733764648438,66],"flags":{"collapsed":true},"order":9,"mode":0,"inputs":[{"localized_name":"video","name":"video","type":"VIDEO","link":121}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[122]},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"fps","name":"fps","type":"FLOAT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"GetVideoComponents","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":[]},{"id":69,"type":"PreviewImage","pos":[720,670],"size":[360,258],"flags":{},"order":11,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":123}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PreviewImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":[]},{"id":3,"type":"KSampler","pos":[1160,20],"size":[315,474],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":95},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":113},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":114},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":115},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[35]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"KSampler"},"widgets_values":[571537608733581,"randomize",20,5,"uni_pc","simple",1]},{"id":57,"type":"CreateVideo","pos":[1160,640],"size":[270,78],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":107},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":null}],"outputs":[{"localized_name":"VIDEO","name":"VIDEO","type":"VIDEO","links":[108]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CreateVideo"},"widgets_values":[24]},{"id":8,"type":"VAEDecode","pos":[1160,550],"size":[210,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":35},{"localized_name":"vae","name":"vae","type":"VAE","link":76}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[107]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":58,"type":"SaveVideo","pos":[1500,20],"size":[660,758],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"video","name":"video","type":"VIDEO","link":108},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"codec","name":"codec","type":"COMBO","widget":{"name":"codec"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"SaveVideo"},"widgets_values":["video/ComfyUI","auto","auto"]},{"id":60,"type":"Wan22FunControlToVideo","pos":[850,130],"size":[270,210],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":111},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":112},{"localized_name":"vae","name":"vae","type":"VAE","link":109},{"localized_name":"ref_image","name":"ref_image","shape":7,"type":"IMAGE","link":129},{"localized_name":"control_video","name":"control_video","shape":7,"type":"IMAGE","link":127},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[113]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[114]},{"localized_name":"latent","name":"latent","type":"LATENT","links":[115]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"Wan22FunControlToVideo"},"widgets_values":[704,704,121,1]},{"id":59,"type":"MarkdownNote","pos":[-550,10],"size":[480,340],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"title":"Model Links","properties":{},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/video/wan/wan2_2\n) | [æ•™ç¨‹](https://docs.comfy.org/zh-CN/tutorials/video/wan/wan2_2\n)\n\n**Diffusion Model**\n- [wan2.2_fun_control_5B_bf16.safetensors](https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/resolve/main/split_files/diffusion_models/wan2.2_fun_control_5B_bf16.safetensors)\n\n**VAE**\n- [wan2.2_vae.safetensors](https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/resolve/main/split_files/vae/wan2.2_vae.safetensors)\n\n**Text Encoder**   \n- [umt5_xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors)\n\n\nFile save location\n\n```\nComfyUI/\nâ”œâ”€â”€â”€ğŸ“‚ models/\nâ”‚   â”œâ”€â”€â”€ğŸ“‚ diffusion_models/\nâ”‚   â”‚   â””â”€â”€â”€wan2.2_fun_control_5B_bf16.safetensors)\nâ”‚   â”œâ”€â”€â”€ğŸ“‚ text_encoders/\nâ”‚   â”‚   â””â”€â”€â”€ umt5_xxl_fp8_e4m3fn_scaled.safetensors \nâ”‚   â””â”€â”€â”€ğŸ“‚ vae/\nâ”‚       â””â”€â”€ wan2.2_vae.safetensors\n```\n"],"color":"#432","bgcolor":"#653"},{"id":37,"type":"UNETLoader","pos":[-30,50],"size":[346.7470703125,82],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[94]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"UNETLoader","models":[{"name":"wan2.2_fun_control_5B_bf16.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/resolve/main/split_files/diffusion_models/wan2.2_fun_control_5B_bf16.safetensors","directory":"diffusion_models"}]},"widgets_values":["wan_video\\wan2.2_fun_control_5B_bf16.safetensors","default"]},{"id":70,"type":"LoadImage","pos":[-20,560],"size":[340,340],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[129]},{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":1,"links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"LoadImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":["qwen_instantx_00004_.png","image"],"color":"#322","bgcolor":"#533"},{"id":66,"type":"LoadVideo","pos":[390,600],"size":[274.080078125,348.080078125],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"file","name":"file","type":"COMBO","widget":{"name":"file"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"VIDEO","name":"VIDEO","type":"VIDEO","links":[121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"LoadVideo","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":["band0013.mp4","image"]}],"links":[[35,3,0,8,0,"LATENT"],[74,38,0,6,0,"CLIP"],[75,38,0,7,0,"CLIP"],[76,39,0,8,1,"VAE"],[94,37,0,48,0,"MODEL"],[95,48,0,3,0,"MODEL"],[107,8,0,57,0,"IMAGE"],[108,57,0,58,0,"VIDEO"],[109,39,0,60,2,"VAE"],[111,6,0,60,0,"CONDITIONING"],[112,7,0,60,1,"CONDITIONING"],[113,60,0,3,1,"CONDITIONING"],[114,60,1,3,2,"CONDITIONING"],[115,60,2,3,3,"LATENT"],[121,66,0,67,0,"VIDEO"],[122,67,0,68,0,"IMAGE"],[123,68,0,69,0,"IMAGE"],[127,68,0,60,4,"IMAGE"],[129,70,0,60,3,"IMAGE"]],"groups":[{"id":1,"title":"Step1 - Load models","bounding":[-50,-20,400,470],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Step3 - Prompt","bounding":[370,-20,448.27801513671875,473.2060852050781],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Step 2 - Start_image","bounding":[-50,470,400,460],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"Step 3 - Control video and video preprocessing","bounding":[370,470,760,470],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.034024229412864,"offset":[444.3610230642381,26.354866981634558]},"frontendVersion":"1.26.7","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}